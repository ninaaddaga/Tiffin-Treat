<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tiffin Treats | DNR Atmosphere</title>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;1,400&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --accent-green: #4A5D23;
            --gold: #D4AF37;
            --glass: rgba(255, 255, 255, 0.98);
        }

        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), 
                        url('https://images.unsplash.com/photo-1543353071-873f17a7a088?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
            background-size: cover;
            background-attachment: fixed;
            color: #333;
            min-height: 100vh;
        }

        header {
            background: var(--glass);
            padding: 15px 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: sticky; top: 0; z-index: 1000;
        }

        .header-content {
            display: flex; justify-content: space-between; align-items: center;
            max-width: 1000px; margin: 0 auto;
        }

        .brand-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8em; font-weight: 700; color: var(--accent-green);
            font-style: italic; margin: 0; cursor: pointer;
        }

        .container {
            max-width: 600px; margin: 20px auto; padding: 25px;
            background: var(--glass); border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            margin-bottom: 150px;
        }

        /* UPDATED STORY SECTION STYLES */
        #about-section {
            text-align: center;
            padding: 20px 0;
            border-bottom: 2px solid #eee;
            margin-bottom: 20px;
        }

        .about-img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--gold);
            margin-bottom: 15px;
        }

        .about-text {
            font-style: italic;
            line-height: 1.6;
            color: #444;
            font-size: 0.95em;
            padding: 0 10px;
        }

        .category-title {
            font-family: 'Playfair Display', serif; font-size: 1.4em;
            color: var(--accent-green); border-bottom: 2px solid var(--gold);
            margin: 30px 0 15px; padding-bottom: 5px;
        }

        .food-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 12px 0; border-bottom: 1px solid #eee;
        }

        .qty-controls {
            display: flex; align-items: center; gap: 10px;
            background: #fff; border: 1px solid #ddd;
            padding: 4px 12px; border-radius: 50px;
        }

        .qty-btn { background: none; border: none; color: var(--accent-green); font-size: 1.2em; cursor: pointer; font-weight: bold; }

        /* FLOATING BASKET BAR */
        .floating-basket-bar {
            position: fixed; bottom: 90px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 500px; background: var(--accent-green);
            padding: 15px 25px; border-radius: 15px; color: white;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 8px 30px rgba(0,0,0,0.5); z-index: 999; cursor: pointer;
        }

        .whatsapp-float {
            position: fixed; bottom: 20px; right: 20px;
            background: #25d366; color: white; width: 60px; height: 60px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3); z-index: 1000; text-decoration: none;
        }

        .hidden { display: none !important; }
        .btn-main { background: var(--accent-green); color: white; border: none; padding: 16px; border-radius: 12px; cursor: pointer; width: 100%; font-weight: 600; text-transform: uppercase; margin-top: 15px; }
        input, textarea { width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; border: 1px solid #ccc; box-sizing: border-box; font-family: inherit; }
    </style>
</head>
<body>

<header>
    <div class="header-content">
        <button onclick="toggleAbout()" style="background:none; border:none; font-weight:600; cursor:pointer;">STORY</button>
        <h1 class="brand-title" onclick="showPage('menu-page')">tiffin treats</h1>
        <button onclick="showPage('cart-page')" style="background:none; border:none; font-weight:600; cursor:pointer;">CART</button>
    </div>
</header>

<div id="menu-page" class="container">
    <div id="about-section" class="hidden">
        <img src="https://media.licdn.com/dms/image/v2/C4E03AQG8_X6Hh-Y9Yg/profile-displayphoto-shrink_400_400/0/1656742818972?e=1741824000&v=beta&t=W-uX0z6uVvO7u97W-Tq8B7X9X_8X_8X_8X_8X_8X_8X" class="about-img">
        <div class="about-text">
            Tiffin Treats started with a simple idea — to share fresh, home-cooked food with people who miss the comfort of meals made at home. We are a small kitchen that focuses on quality, hygiene, and care in every tiffin we prepare.
            <br><br>
            Each meal is cooked fresh using simple, wholesome ingredients and packed with attention and warmth. We believe that good food doesn’t need to be fancy — it just needs to be made with love and sincerity.
            <br><br>
            At Tiffin Treats, our aim is to provide comforting, homemade meals that make you feel cared for, one tiffin at a time.
        </div>
    </div>

    <div class="category-title">Paratha Thalis (2 pcs)</div>
    <div id="paratha-list"></div>

    <div class="category-title">Main Course</div>
    <div id="main-list"></div>

    <div class="category-title">Combos & Thalis</div>
    <div id="thali-list"></div>

    <div class="category-title">Sides & Breads</div>
    <div id="sides-list"></div>

    <div class="category-title">Beverages</div>
    <div id="beverage-list"></div>
</div>

<div id="cart-page" class="container hidden">
    <h2 style="font-family: 'Playfair Display'; text-align: center;">Your Order</h2>
    <div id="cart-items-details"></div>
    <h3 style="display:flex; justify-content:space-between; margin-top: 20px; border-top: 2px solid #4A5D23; padding-top: 10px;">
        Total <span>₹<span id="final-total">0</span></span>
    </h3>
    <button class="btn-main" onclick="showPage('checkout-page')">Enter Delivery Details</button>
</div>

<div id="checkout-page" class="container hidden">
    <h2 style="font-family: 'Playfair Display'; text-align: center;">Delivery</h2>
    <input type="text" id="custName" placeholder="Full Name">
    <textarea id="custAddr" placeholder="Complete Address (Society, Flat No, Landmark)" rows="3"></textarea>
    
    <div id="eta-info" class="hidden" style="background:#f9f9f9; padding:15px; border-radius:10px; text-align:center; margin:15px 0; border:1px dashed var(--accent-green);">
        <div style="font-weight:700; color:var(--accent-green);">LIVE ETA</div>
        <div style="font-size:1.2em; color:var(--gold); font-weight:600;">Live Traffic + 20m Prep Buffer</div>
        <a id="maps-route" href="#" target="_blank" style="font-size:0.8em; color:var(--accent-green);">View Route on Maps</a>
    </div>

    <button class="btn-main" onclick="finalizeOrder()">Check ETA & Pay</button>
</div>

<div id="payment-page" class="container hidden" style="text-align: center;">
    <h2 style="font-family: 'Playfair Display';">Payment</h2>
    <img id="qr-code" src="" style="width:180px; margin:20px 0; border: 1px solid #eee; padding: 10px; background: #fff;">
    <button class="btn-main" id="rzp-button">Pay with Razorpay</button>
</div>

<div id="floating-bar" class="floating-basket-bar hidden" onclick="showPage('cart-page')">
    <div>
        <span id="items-count-float" style="background:white; color:var(--accent-green); padding:2px 8px; border-radius:10px; font-weight:700; margin-right:10px;">0</span>
        <span style="font-weight:600; letter-spacing:1px;">VIEW CART</span>
    </div>
    <span style="font-weight:700;">₹<span id="total-float">0</span></span>
</div>

<a href="https://wa.me/YOUR_PHONE_NUMBER" class="whatsapp-float" target="_blank">
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" width="35" alt="WhatsApp">
</a>

<script>
    const fullMenu = {
        paratha: [
            {n: "Pizza Paratha Thali", p: 199}, {n: "Aloo Paratha Thali", p: 150},
            {n: "Aloo Pyaaz Paratha Thali", p: 150}, {n: "Paneer Paratha Thali", p: 180},
            {n: "Gobhi Paratha Thali", p: 150}, {n: "Muli Paratha Thali", p: 150},
            {n: "Methi Paratha Thali", p: 150}, {n: "Mix Paratha Thali", p: 150},
            {n: "Sattu Paratha Thali", p: 150}
        ],
        main: [
            {n: "Dal Fry (Full)", p: 320}, {n: "Dal Fry (Half)", p: 160},
            {n: "Paneer Butter Masala (Full)", p: 399}, {n: "Paneer Butter Masala (Half)", p: 200},
            {n: "Kadai Paneer (Full)", p: 399}, {n: "Palak Paneer (Full)", p: 399},
            {n: "Dum Aloo (Full)", p: 340}, {n: "Kadhi Pakoda (Full)", p: 320},
            {n: "Punjabi Chhole (Full)", p: 350}, {n: "Rajma (Full)", p: 350}
        ],
        thali: [
            {n: "Mini Meal (Dal, Sabji, 4 Roti)", p: 160}, {n: "Deluxe Thali", p: 199},
            {n: "Supreme Thali", p: 249}, {n: "Chhole Bhature (2 pcs)", p: 200},
            {n: "Pav Bhaji (3 pcs)", p: 200}
        ],
        sides: [
            {n: "Plain Paratha (1 pc)", p: 35}, {n: "Ghee Tawa Roti (1 pc)", p: 25},
            {n: "Puri (4 pcs) with Aloo Sabji", p: 150}, {n: "Plain Rice", p: 100}, {n: "Jeera Rice", p: 130}
        ],
        beverage: [
            {n: "Butter Milk", p: 50}, {n: "Sweet Lassi", p: 70},
            {n: "Cold Coffee", p: 99}, {n: "Lemonade", p: 50}
        ]
    };

    let cart = {};

    function toggleAbout() { document.getElementById('about-section').classList.toggle('hidden'); }

    function renderMenu() {
        for (let cat in fullMenu) {
            let html = '';
            fullMenu[cat].forEach(item => {
                html += `<div class="food-item">
                    <div><b>${item.n}</b><br><small>₹${item.p}</small></div>
                    <div class="qty-controls">
                        <button class="qty-btn" onclick="updateQty('${item.n}', ${item.p}, -1)">−</button>
                        <span id="qty-${item.n}" style="font-weight:600">0</span>
                        <button class="qty-btn" onclick="updateQty('${item.n}', ${item.p}, 1)">+</button>
                    </div>
                </div>`;
            });
            document.getElementById(cat + '-list').innerHTML = html;
        }
    }

    function updateQty(name, price, change) {
        if (!cart[name]) cart[name] = { price, qty: 0 };
        if (cart[name].qty + change >= 0) {
            cart[name].qty += change;
            document.getElementById('qty-'+name).innerText = cart[name].qty;
            updateTotals();
        }
    }

    function updateTotals() {
        let total = 0, count = 0;
        for(let key in cart) { total += (cart[key].price * cart[key].qty); count += cart[key].qty; }
        document.getElementById('final-total').innerText = total;
        document.getElementById('total-float').innerText = total;
        document.getElementById('items-count-float').innerText = count;
        
        const isMenu = !document.getElementById('menu-page').classList.contains('hidden');
        document.getElementById('floating-bar').classList.toggle('hidden', count === 0 || !isMenu);
    }

    function showPage(pageId) {
        document.querySelectorAll('.container').forEach(p => p.classList.add('hidden'));
        document.getElementById(pageId).classList.remove('hidden');
        
        if(pageId === 'cart-page') {
            let html = '';
            for(let key in cart) if(cart[key].qty > 0) {
                html += `<div style="display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid #eee;">
                    <span>${key} (x${cart[key].qty})</span><span>₹${cart[key].price * cart[key].qty}</span>
                </div>`;
            }
            document.getElementById('cart-items-details').innerHTML = html || '<p style="text-align:center">Empty</p>';
        }
        updateTotals();
        window.scrollTo(0,0);
    }

    function finalizeOrder() {
        const addr = document.getElementById('custAddr').value;
        if(!addr) return alert("Please enter your address.");
        
        const origin = "DNR Atmosphere, Whitefield, Bengaluru";
        document.getElementById('maps-route').href = `https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(origin)}&destination=${encodeURIComponent(addr)}`;
        document.getElementById('eta-info').classList.remove('hidden');

        const amt = document.getElementById('final-total').innerText;
        document.getElementById('qr-code').src = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=upi://pay?pa=YOUR_ID@upi&am=${amt}`;
        
        setTimeout(() => showPage('payment-page'), 2500);
    }

    document.getElementById('rzp-button').onclick = function() {
        var options = {
            "key": "rzp_test_YOUR_ID",
            "amount": document.getElementById('final-total').innerText * 100,
            "name": "Tiffin Treats",
            "handler": function (res){ alert("Order Placed!"); },
            "theme": { "color": "#4A5D23" }
        };
        new Razorpay(options).open();
    };

    renderMenu();
</script>
</body>
</html>
